CREATE TABLE device
(
    device_uid   UUID PRIMARY KEY NOT NULL,
    device_type  VARCHAR(255)     NOT NULL,
    device_model VARCHAR(255)     NOT NULL,
    os_version   VARCHAR(255)     NOT NULL
);

CREATE TABLE detection
(
    detection_id          UUID PRIMARY KEY NOT NULL,
    time                  TIMESTAMP WITHOUT TIME ZONE NOT NULL,
    name_of_app           VARCHAR(255),
    type_of_app           VARCHAR(255),
    type                  VARCHAR(255)     NOT NULL,
    resolved_detection_id UUID,
    device_uid            UUID REFERENCES device (device_uid)
);


INSERT INTO device (device_uid, device_type, device_model, os_version)
VALUES ('4419d425-f88d-4c48-adbc-e94a1b7766ef', 'IOS', 'iPhone X', 'iOS 14.0');

INSERT INTO detection (detection_id, time, name_of_app, type_of_app, type, device_uid)
VALUES ('3c4f4d4c-0101-4c4f-8888-010101010101', '2023-03-7 12:00:00', 'MyApp', 'IOS', 'NEW',
        (SELECT device_uid FROM device WHERE device_model = 'iPhone X'));
